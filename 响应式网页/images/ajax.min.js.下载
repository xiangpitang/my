jQuery(function(e){e("#user_access_form_form").submit(submitUserAccessForm),e("#send_signin_link").click(sendSignInLink),setAjaxHandlers()});var setAjaxHandlers=function(){$(".delete_signups").unbind("click"),$(".delete_signups").click(deleteSignups),$(".woocommerce_account_subscriptions a.cancel")&&($(".woocommerce_account_subscriptions a.cancel").unbind("click"),$(".woocommerce_account_subscriptions a.cancel").click(function(e){var n=$(this).attr("href"),i="";return e.preventDefault(),i+='<h4><i class="red-text ion-android-sad"></i> ',i+="Why are you canceling?</h4>",i+='<img style="width: 100%;" src="https://s3-us-west-2.amazonaws.com/upscribe/gifs/why-are-you-cancelling.gif"/>',modalFeedback({message:i,submit:function(){window.location.href=n,$(this).unbind()}}),!1}))},deleteSignups=function(){var e=($(this).attr("data-value"),$(this),""),n=$("#signup_list tbody").find("input:checked");return $(n).each(function(n,i){var s=$(this).val(),a="";n>0&&(a=","),e+=a+s,$("#signup_list").find("tr#"+s).prop("checked",!1),$("#signup_list").find("tr#"+s).hide()}),e?($(".selected_count").text(""),void confirmMsg({message:"Deleting Signups...",callback:function(){$.ajax({type:"POST",url:"undefined"==typeof ajaxUrl?"/wp-admin/admin-ajax.php":ajaxUrl,data:{action:"delete_signups",ids:e},success:function(e){return e=$.parseJSON(e),e.success?void $(n).each(function(e,n){var i=$(this).val();$("#signup_list").find("tr#"+i).remove()}):(alertMsg(e.message),!1)},error:function(e){console.log("error"),console.log(e)}})},reset:function(){$("#signup_list").find("tr").show()}})):!1},sendSignInLink=function(){var e=jQuery,n=e("#user_access_form_form"),i=e(n).find("#email").val(),s=e(n).find("#send_signin_link"),a=e(s).val();if(!validateEmail(i))return e(s).val("Is that your email?"),e(n).find("#email").keypress(function(){e(s).text(a)}),!1;e(n).find(".signin-link-holder").removeClass("col-sm-6"),e(n).find(".signin-link-holder").addClass("col-sm-12"),e(s).text("Sending you a link now!"),e(n).find(".use_password").hide();var t={action:"ajax_email_login",email:i};return e.ajax({type:"POST",url:"undefined"==typeof ajaxUrl?"/wp-admin/admin-ajax.php":ajaxUrl,data:t,success:function(i){i=e.parseJSON(i),i&&"1"==i.success?e(s).text("Awesome! Check your inbox"):(e(s).text("Oops! Please try again"),e(n).find("#email").val(""),e(n).find(".use_password").show(),e(n).find("#email").keypress(function(){e(s).text(a)}))},error:function(e){console.log("error"),console.log(e)}}),!1},submitUserAccessForm=function(){var e=jQuery,n=e(this),i=e(n).find("#email").val(),s=e(n).find("#password").val(),a=e(n).find("#submit"),t=e(a).val();if(!i||!validateEmail(i))return e(a).val("Is that your email?"),e(n).find("#email").keypress(function(){e(n).find("#submit").val(t)}),!1;if(s.length<8)return e(a).val("That password doesn't seem long enough..."),e(n).find("#password").val(""),e(n).find("#password").keypress(function(){e(n).find("#submit").val(t)}),!1;e(n).find("#submit").val("Sending...");var o={action:"ajax_user_access",email:i,password:s};return e.ajax({type:"POST",url:"undefined"==typeof ajaxUrl?"/wp-admin/admin-ajax.php":ajaxUrl,data:o,success:function(i){i=e.parseJSON(i),i&&"1"==i.success?i.url?(e(n).find("#submit").val("Sweet! To the dash!"),window.location.href=i.url):e(n).find("#submit").val("Awesome! Check your inbox"):(e(n).find("#submit").val("Oops! Please try again"),e(n).find("#email").val(""),e(n).find("#password").val(""),e(n).find("#email").keypress(function(){e(n).find("#submit").val("Let's try again!")}))},error:function(e){console.log("error"),console.log(e)}}),!1},upUserAction=function(e,n,i){jQuery.ajax({type:"POST",url:"undefined"==typeof ajaxUrl?"/wp-admin/admin-ajax.php":ajaxUrl,data:{action:"up_user_action",key:e,val:n},success:i,error:function(e){console.log("error"),console.log(e)}})};